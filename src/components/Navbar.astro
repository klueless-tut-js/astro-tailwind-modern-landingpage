---
import logo from "../assets/logo.svg";
import MenuItem from "./MenuItem.astro";;
---

<nav class="mx-auto p-4 bg-amber-400">
  <div class="container mx-auto flex items-center justify-between">
    <a href="/"
      class="
        focus:outline-none
        focus-visible:ring-4
      ring-neutral-900
        ring-offset-4
      ring-offset-amber-400
        rounded-sm
        lg:absolute
        lg:left-1/2
        lg:-translate-x-1/2
        lg:top-9
        z-50
        hover:opacity-75
        transition-opacity
        "
      aria-label="Go to home page">
      <img src={logo} class="w-48 md:w-64 lg:w-72" width="200" alt="Home Smart Logo">
    </a>
    <button 
      id="menu"
      class="
        lg:hidden
        focus:outline-none
        focus-visible:ring-4
        ring-neutral-900
        rounded-sm
        ring-offset-4
        ring-offset-amber-400
        text-neutral-900
        hover:text-neutral-600
        transition-colors
        " 
      aria-expanded="false"
      aria-label="Open Menu"
      aria-expanded="false">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" 
        class="w-8 h-8">
        <path strokeLinecap="round" strokeLinejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
      </svg>
    </button>
    <div role="menubar" class="
        hidden
        flex-col
        p-6
        gap-4
        absolute
        z-40
        right-0
        left-0
        top-16
        bg-amber-400
        shadow-xl
        text-center
        text-lg
        items-center
        lg:flex
        lg:flex-row
        lg:static
        lg:shadow-none
        lg:justify-between
        lg:w-full
      ">
      <MenuItem href="/">Home</MenuItem>
      <MenuItem href="/" classExtra='lg:mr-auto'>Contact</MenuItem>
      <MenuItem href="/">Login</MenuItem>
      <MenuItem href="/" variant='highlight'>Sign Up</MenuItem>
    </div>
  </div>  
</nav>

<script>
  const navBtn = document.querySelector('#menu');
  const menuBar = document.querySelector('[role="menubar"]');

  if (navBtn && menuBar) {
    navBtn.addEventListener('click', () => {
    const isExpanded = JSON.parse(navBtn.getAttribute('aria-expanded') as string);
    navBtn.setAttribute('aria-expanded', (!isExpanded).toString());
    menuBar.classList.toggle('hidden');
    menuBar.classList.toggle('flex');
  })  }
</script>